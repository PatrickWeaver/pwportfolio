extends layout

block content

	a(href="/") ⬅ Projects

	div.project-view-project-content

		h1= title

		img(src=cover).project-view-project-cover
		br
		if cover
			a(href="/" + project.slug + "/images/remove-cover/").admin-link ✂️ Remove Cover

		ul
				li= "Status: "
					a(href="/?status=" + project.status.name).tag #{project.status.name}
				if project.startDate
					li
						if moment() >= project.startDate
							|Started: 
						else
							|Scheduled to Start: 
						|#{moment(project.startDate).format("MMM YYYY")}
					if project.endDate
						li
							if moment() >= project.endDate
								|Ended: 
							else
								|Scheduled to End: 
							|#{moment(project.endDate).format("MMM YYYY")}
				if project.tags
					li
						ul
							each tag in project.tags
								if tag != ""
									a(href="/?tags=" + tag)
										li.tag #{tag}
				br
				if project.projectURL
					li Project URL: 
						a(href=project.projectURL, target="_blank")= (project.projectURL).substring((project.projectURL).indexOf("//") + 2)
				if project.sourceURL
					li Source URL: 
						a(href=project.sourceURL, target="_blank")= (project.sourceURL).substring((project.sourceURL).indexOf("//") + 2)
				br
				if project.description
					li Description:
						div!= md(project.description)
				if project.images
					li
						ul
							each image, index in project.images
								li(id="image-" + index)
									a(href="/" + project.slug + "/images/" + image.order + "/view/")
										img(src=image.url).project-image
									p=image.caption
									if user
										div.admin-image-details
											p=image.order
											p=image._id
									if user
										a(href="/" + project.slug + "/images/" + image.order + "/delete/").delete.admin-link 🗑 Delete Image
										if image.cover
											a(href="/" + project.slug + "/images/remove-cover/").admin-link ✂️ Remove Cover
										else
											a(href="/" + project.slug + "/images/" + image.order + "/make-cover/").admin-link 🏗 Make Cover
		if user
			a(href="/" + project.slug + "/edit/").admin-link 📝 Edit #{project.name}
			a(href="/" + project.slug + "/images/upload/").admin-link ⬆ Upload Image
			a(href="/" + project.slug + "/images/order/").admin-link 🔁 Change Image Order
			a(href="/" + project.slug + "/delete/").delete.admin-link 🗑 Delete
			a(href="/" + project.slug + "/toggle/" + !project.active + "/").admin-link
						if project.active
							| 🔐 Deactivate
						else
							| 🔓 Activate